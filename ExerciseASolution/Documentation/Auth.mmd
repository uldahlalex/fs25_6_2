sequenceDiagram
    title Authentication Flow
    participant Client
    participant WebSocketServer
    participant EventHandler
    participant WebSocketManager
    participant Redis

    Client->>WebSocketServer: ClientWantsToAuthenticateDto
    WebSocketServer->>EventHandler: CallEventHandler
    EventHandler->>WebSocketManager: Subscribe(connectionId, "user:{userId}")
    WebSocketManager->>Redis: SetAdd ws:topic:user:{userId}
    WebSocketManager->>Redis: SetAdd ws:connection:{connectionId}:topics
    EventHandler->>WebSocketManager: GetTopicsForConnection
    WebSocketManager->>Redis: SetMembers ws:connection:{connectionId}:topics
    Redis-->>WebSocketManager: Topics list
    EventHandler->>Client: ServerAuthenticatedClientDto